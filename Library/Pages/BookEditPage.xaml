<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Library.Pages.BookEditPage"
             xmlns:viewmodel="clr-namespace:Library.ViewModels"             
             Title="{Binding BookVm.Title}"
             x:DataType="viewmodel:BookPageViewModel" FlowDirection="RightToLeft">
    <ContentPage.Resources>
        <Style x:Key="label" TargetType="Label">
            <Setter Property="Padding" Value="10"/>
        </Style>
    </ContentPage.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="15*"/>
            <RowDefinition Height="18*"/>
            <RowDefinition Height="18*"/>
            <RowDefinition Height="18*"/>
            <RowDefinition Height="26*"/>
            <RowDefinition Height="10*"/>
        </Grid.RowDefinitions>

            <FlexLayout Grid.Row="0"  HorizontalOptions="Center">
                <Entry MinimumWidthRequest="150" MaxLength="13"  Margin="10,0" Text="{Binding BookVm.Barcode}"/>
                <Button Text="خواندن بارکد" Command="{Binding ReadBarcodeCommand}"/>
            </FlexLayout>
        
        <FlexLayout Grid.Row="1" Wrap="NoWrap" AlignItems="Center">
            <Label Text="عنوان" Style="{StaticResource label}" MinimumWidthRequest="75"></Label>
            <Entry Text="{Binding BookVm.Title}" Placeholder="عنوان" FlexLayout.Grow="1"/>
        </FlexLayout>

        <FlexLayout Grid.Row="2" Wrap="NoWrap" AlignItems="Center">
            <Label Text="توضیح" Style="{StaticResource label}" MinimumWidthRequest="75"/>
            <Entry Text="{Binding BookVm.Description}" Placeholder="توضیح"   FlexLayout.Grow="1"/>
        </FlexLayout>

        <FlexLayout Grid.Row="3" Wrap="NoWrap" AlignItems="Center">
            <Label Text="ناشر" Style="{StaticResource label}" MinimumWidthRequest="75"/>
            <Entry Text="{Binding BookVm.Publisher}" Placeholder="ناشر" FlexLayout.Grow="1"/>
        </FlexLayout>

        <FlexLayout Grid.Row="4" Wrap="NoWrap" AlignItems="Center">
            <Label Text="نویسنده" Style="{StaticResource label}" MinimumWidthRequest="75"></Label>
            <Entry Text="{Binding BookVm.Author}" Placeholder="نویسنده" FlexLayout.Grow="1"/>
        </FlexLayout>



        
        <Image Grid.Row="5" Source="{Binding BookVm.CoverImage}" Margin="0,1" >
            <Image.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding SelectImageCommand}"
                              NumberOfTapsRequired="1" />
                    <ClickGestureRecognizer Command="{Binding SelectImageCommand}"
                             />
                </Image.GestureRecognizers>
            </Image>


<HorizontalStackLayout  Grid.Row="6">

        <Button Text="ذخیره" Command="{Binding BookVm.SaveCommand}" />
        <Button Text=" ذخیره و مورد جدید" Command="{Binding BookVm.SaveAndNewCommand}" />
        </HorizontalStackLayout>
    </Grid>

</ContentPage>